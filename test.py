from pypokedex.exceptions import PyPokedexHTTPError
from util import set_config 
from util import describe_mon
from util import describe_type_combos
from argparse import ArgumentParser
from api.service import Service 
from pathlib import Path
import pypokedex as dex

import requests
import asyncio
import uvicorn
import signal
import sys
import ssl

PORTS = {
    "client": 3134,
    "api": 3134 + 1
}

API_PORT = PORTS['api']
CLIENT_PORT = PORTS['client']
PEM_PATH = Path('/etc/letsencrypt/live/owl')

parser = ArgumentParser(
                    prog='Tic Kan Toe API',
                    description='Test of Tic Kan Toe API',
                    epilog=f'Using the PokéAPI')

TYPE_COMBOS = [["bug"], ["bug", "dark"], ["bug", "dragon"], ["bug", "electric"], ["bug", "fairy"], ["bug", "fighting"], ["bug", "fire"], ["bug", "flying"], ["bug", "ghost"], ["bug", "grass"], ["bug", "ground"], ["bug", "ice"], ["bug", "normal"], ["bug", "poison"], ["bug", "psychic"], ["bug", "rock"], ["bug", "shadow"], ["bug", "steel"], ["bug", "unknown"], ["bug", "water"], ["dark"], ["dark", "dragon"], ["dark", "electric"], ["dark", "fairy"], ["dark", "fighting"], ["dark", "fire"], ["dark", "flying"], ["dark", "ghost"], ["dark", "grass"], ["dark", "ground"], ["dark", "ice"], ["dark", "normal"], ["dark", "poison"], ["dark", "psychic"], ["dark", "rock"], ["dark", "shadow"], ["dark", "steel"], ["dark", "unknown"], ["dark", "water"], ["dragon"], ["dragon", "electric"], ["dragon", "fairy"], ["dragon", "fighting"], ["dragon", "fire"], ["dragon", "flying"], ["dragon", "ghost"], ["dragon", "grass"], ["dragon", "ground"], ["dragon", "ice"], ["dragon", "normal"], ["dragon", "poison"], ["dragon", "psychic"], ["dragon", "rock"], ["dragon", "shadow"], ["dragon", "steel"], ["dragon", "unknown"], ["dragon", "water"], ["electric"], ["electric", "fairy"], ["electric", "fighting"], ["electric", "fire"], ["electric", "flying"], ["electric", "ghost"], ["electric", "grass"], ["electric", "ground"], ["electric", "ice"], ["electric", "normal"], ["electric", "poison"], ["electric", "psychic"], ["electric", "rock"], ["electric", "shadow"], ["electric", "steel"], ["electric", "unknown"], ["electric", "water"], ["fairy"], ["fairy", "fighting"], ["fairy", "fire"], ["fairy", "flying"], ["fairy", "ghost"], ["fairy", "grass"], ["fairy", "ground"], ["fairy", "ice"], ["fairy", "normal"], ["fairy", "poison"], ["fairy", "psychic"], ["fairy", "rock"], ["fairy", "shadow"], ["fairy", "steel"], ["fairy", "unknown"], ["fairy", "water"], ["fighting"], ["fighting", "fire"], ["fighting", "flying"], ["fighting", "ghost"], ["fighting", "grass"], ["fighting", "ground"], ["fighting", "ice"], ["fighting", "normal"], ["fighting", "poison"], ["fighting", "psychic"], ["fighting", "rock"], ["fighting", "shadow"], ["fighting", "steel"], ["fighting", "unknown"], ["fighting", "water"], ["fire"], ["fire", "flying"], ["fire", "ghost"], ["fire", "grass"], ["fire", "ground"], ["fire", "ice"], ["fire", "normal"], ["fire", "poison"], ["fire", "psychic"], ["fire", "rock"], ["fire", "shadow"], ["fire", "steel"], ["fire", "unknown"], ["fire", "water"], ["flying"], ["flying", "ghost"], ["flying", "grass"], ["flying", "ground"], ["flying", "ice"], ["flying", "normal"], ["flying", "poison"], ["flying", "psychic"], ["flying", "rock"], ["flying", "shadow"], ["flying", "steel"], ["flying", "unknown"], ["flying", "water"], ["ghost"], ["ghost", "grass"], ["ghost", "ground"], ["ghost", "ice"], ["ghost", "normal"], ["ghost", "poison"], ["ghost", "psychic"], ["ghost", "rock"], ["ghost", "shadow"], ["ghost", "steel"], ["ghost", "unknown"], ["ghost", "water"], ["grass"], ["grass", "ground"], ["grass", "ice"], ["grass", "normal"], ["grass", "poison"], ["grass", "psychic"], ["grass", "rock"], ["grass", "shadow"], ["grass", "steel"], ["grass", "unknown"], ["grass", "water"], ["ground"], ["ground", "ice"], ["ground", "normal"], ["ground", "poison"], ["ground", "psychic"], ["ground", "rock"], ["ground", "shadow"], ["ground", "steel"], ["ground", "unknown"], ["ground", "water"], ["ice"], ["ice", "normal"], ["ice", "poison"], ["ice", "psychic"], ["ice", "rock"], ["ice", "shadow"], ["ice", "steel"], ["ice", "unknown"], ["ice", "water"], ["normal"], ["normal", "poison"], ["normal", "psychic"], ["normal", "rock"], ["normal", "shadow"], ["normal", "steel"], ["normal", "unknown"], ["normal", "water"], ["poison"], ["poison", "psychic"], ["poison", "rock"], ["poison", "shadow"], ["poison", "steel"], ["poison", "unknown"], ["poison", "water"], ["psychic"], ["psychic", "rock"], ["psychic", "shadow"], ["psychic", "steel"], ["psychic", "unknown"], ["psychic", "water"], ["rock"], ["rock", "shadow"], ["rock", "steel"], ["rock", "unknown"], ["rock", "water"], ["shadow"], ["shadow", "steel"], ["shadow", "unknown"], ["shadow", "water"], ["steel"], ["steel", "unknown"], ["steel", "water"], ["unknown"], ["unknown", "water"], ["water"]]

# TODO: add Unova to Indigo Disk entry?
GAME_LIST = [[1, [2], ["kanto"]], [1, [2], ["kanto"]], [2, [3], ["kanto", "johto"]], [2, [3], ["kanto", "johto"]], [3, [4], ["hoenn"]], [3, [4], ["hoenn"]], [3, [2], ["kanto"]], [4, [5], ["sinnoh"]], [4, [6], ["sinnoh"]], [4, [7], ["kanto", "johto"]], [5, [8], ["unova"]], [3, [], []], [3, [], []], [5, [9], ["unova"]], [6, [12, 13, 14], ["kalos"]], [6, [15], ["hoenn"]], [7, [16, 17, 18, 19, 20], ["alola"]], [7, [21, 22, 23, 24, 25], ["alola"]], [7, [26], ["kanto"]], [8, [27, 28, 29], ["galar"]], [8, [28], ["galar"]], [8, [29], ["galar"]], [8, [5], ["sinnoh"]], [8, [30], ["hisui"]], [9, [31], ["paldea"]], [9, [32], ["paldea"]], [9, [33], ["paldea"]]]
 
# TODO: investigate mons with "None" original region, investigate melmetal
MON_LIST = [["bulbasaur", [148], {"kanto": 1}], ["ivysaur", [148], {"kanto": 1}], ["venusaur", [148], {"kanto": 1}], ["charmander", [105], {"kanto": 1}], ["charmeleon", [105], {"kanto": 1}], ["charizard", [106], {"kanto": 1}], ["squirtle", [209], {"kanto": 1}], ["wartortle", [209], {"kanto": 1}], ["blastoise", [209], {"kanto": 1}], ["caterpie", [0], {"kanto": 1}], ["metapod", [0], {"kanto": 1}], ["butterfree", [7], {"kanto": 1}], ["weedle", [13], {"kanto": 1}], ["kakuna", [13], {"kanto": 1}], ["beedrill", [13], {"kanto": 1}], ["pidgey", [124], {"kanto": 1}], ["pidgeotto", [124], {"kanto": 1}], ["pidgeot", [124], {"kanto": 1}], ["rattata", [174], {"kanto": 1}], ["raticate", [174], {"kanto": 1}], ["spearow", [124], {"kanto": 1}], ["fearow", [124], {"kanto": 1}], ["ekans", [182], {"kanto": 1}], ["arbok", [182], {"kanto": 1}], ["pikachu", [57], {"kanto": 1}], ["raichu", [57], {"kanto": 1}], ["sandshrew", [155], {"kanto": 1}], ["sandslash", [155], {"kanto": 1}], ["nidoran-f", [182], {"kanto": 1}], ["nidorina", [182], {"kanto": 1}], ["nidoqueen", [158], {"kanto": 1}], ["nidoran-m", [182], {"kanto": 1}], ["nidorino", [182], {"kanto": 1}], ["nidoking", [158], {"kanto": 1}], ["clefairy", [74], {"kanto": 1}], ["clefable", [74], {"kanto": 1}], ["vulpix", [105], {"kanto": 1}], ["ninetales", [105], {"kanto": 1}], ["jigglypuff", [82], {"kanto": 1}], ["wigglytuff", [82], {"kanto": 1}], ["zubat", [125], {"kanto": 1}], ["golbat", [125], {"kanto": 1}], ["oddish", [148], {"kanto": 1}], ["gloom", [148], {"kanto": 1}], ["vileplume", [148], {"kanto": 1}], ["paras", [9], {"kanto": 1}], ["parasect", [9], {"kanto": 1}], ["venonat", [13], {"kanto": 1}], ["venomoth", [13], {"kanto": 1}], ["diglett", [155], {"kanto": 1}], ["dugtrio", [155], {"kanto": 1}], ["meowth", [174], {"kanto": 1}], ["persian", [174], {"kanto": 1}], ["psyduck", [209], {"kanto": 1}], ["golduck", [209], {"kanto": 1}], ["mankey", [90], {"kanto": 1}], ["primeape", [90], {"kanto": 1}], ["growlithe", [105], {"kanto": 1}], ["arcanine", [105], {"kanto": 1}], ["poliwag", [209], {"kanto": 1}], ["poliwhirl", [209], {"kanto": 1}], ["poliwrath", [104], {"kanto": 1}], ["abra", [189], {"kanto": 1}], ["kadabra", [189], {"kanto": 1}], ["alakazam", [189], {"kanto": 1}], ["machop", [90], {"kanto": 1}], ["machoke", [90], {"kanto": 1}], ["machamp", [90], {"kanto": 1}], ["bellsprout", [148], {"kanto": 1}], ["weepinbell", [148], {"kanto": 1}], ["victreebel", [148], {"kanto": 1}], ["tentacool", [188], {"kanto": 1}], ["tentacruel", [188], {"kanto": 1}], ["geodude", [160], {"kanto": 1}], ["graveler", [160], {"kanto": 1}], ["golem", [160], {"kanto": 1}], ["ponyta", [105], {"kanto": 1}], ["rapidash", [105], {"kanto": 1}], ["slowpoke", [194], {"kanto": 1}], ["slowbro", [194], {"kanto": 1}], ["magnemite", [71], {"kanto": 1}], ["magneton", [71], {"kanto": 1}], ["farfetchd", [124], {"kanto": 1}], ["doduo", [124], {"kanto": 1}], ["dodrio", [124], {"kanto": 1}], ["seel", [209], {"kanto": 1}], ["dewgong", [173], {"kanto": 1}], ["grimer", [182], {"kanto": 1}], ["muk", [182], {"kanto": 1}], ["shellder", [209], {"kanto": 1}], ["cloyster", [173], {"kanto": 1}], ["gastly", [137], {"kanto": 1}], ["haunter", [137], {"kanto": 1}], ["gengar", [137], {"kanto": 1}], ["onix", [160], {"kanto": 1}], ["drowzee", [189], {"kanto": 1}], ["hypno", [189], {"kanto": 1}], ["krabby", [209], {"kanto": 1}], ["kingler", [209], {"kanto": 1}], ["voltorb", [57], {"kanto": 1}], ["electrode", [57], {"kanto": 1}], ["exeggcute", [149], {"kanto": 1}], ["exeggutor", [149], {"kanto": 1}], ["cubone", [155], {"kanto": 1}], ["marowak", [155], {"kanto": 1}], ["hitmonlee", [90], {"kanto": 1}], ["hitmonchan", [90], {"kanto": 1}], ["lickitung", [174], {"kanto": 1}], ["koffing", [182], {"kanto": 1}], ["weezing", [182], {"kanto": 1}], ["rhyhorn", [160], {"kanto": 1}], ["rhydon", [160], {"kanto": 1}], ["chansey", [174], {"kanto": 1}], ["tangela", [144], {"kanto": 1}], ["kangaskhan", [174], {"kanto": 1}], ["horsea", [209], {"kanto": 1}], ["seadra", [209], {"kanto": 1}], ["goldeen", [209], {"kanto": 1}], ["seaking", [209], {"kanto": 1}], ["staryu", [209], {"kanto": 1}], ["starmie", [194], {"kanto": 1}], ["mr-mime", [84], {"kanto": 1}], ["scyther", [7], {"kanto": 1}], ["jynx", [168], {"kanto": 1}], ["electabuzz", [57], {"kanto": 1}], ["magmar", [105], {"kanto": 1}], ["pinsir", [0], {"kanto": 1}], ["tauros", [174], {"kanto": 1}], ["magikarp", [209], {"kanto": 1}], ["gyarados", [131], {"kanto": 1}], ["lapras", [173], {"kanto": 1}], ["ditto", [174], {"kanto": 1}], ["eevee", [174], {"kanto": 1}], ["vaporeon", [209], {"kanto": 1}], ["jolteon", [57], {"kanto": 1}], ["flareon", [105], {"kanto": 1}], ["porygon", [174], {"kanto": 1}], ["omanyte", [199], {"kanto": 1}], ["omastar", [199], {"kanto": 1}], ["kabuto", [199], {"kanto": 1}], ["kabutops", [199], {"kanto": 1}], ["aerodactyl", [127], {"kanto": 1}], ["snorlax", [174], {"kanto": 1}], ["articuno", [123], {"kanto": 1}], ["zapdos", [61], {"kanto": 1}], ["moltres", [106], {"kanto": 1}], ["dratini", [39], {"kanto": 1}], ["dragonair", [39], {"kanto": 1}], ["dragonite", [44], {"kanto": 1}], ["mewtwo", [189], {"kanto": 1}], ["mew", [189], {"kanto": 1}], ["chikorita", [144], {"johto": 2}], ["bayleef", [144], {"johto": 2}], ["meganium", [144], {"johto": 2}], ["cyndaquil", [105], {"johto": 2}], ["quilava", [105], {"johto": 2}], ["typhlosion", [105], {"johto": 2}], ["totodile", [209], {"johto": 2}], ["croconaw", [209], {"johto": 2}], ["feraligatr", [209], {"johto": 2}], ["sentret", [174], {"johto": 2}], ["furret", [174], {"johto": 2}], ["hoothoot", [124], {"johto": 2}], ["noctowl", [124], {"johto": 2}], ["ledyba", [7], {"johto": 2}], ["ledian", [7], {"johto": 2}], ["spinarak", [13], {"johto": 2}], ["ariados", [13], {"johto": 2}], ["crobat", [125], {"johto": 2}], ["chinchou", [73], {"johto": 2}], ["lanturn", [73], {"johto": 2}], ["pichu", [57], {"johto": 2}], ["cleffa", [74], {"johto": 2}], ["igglybuff", [82], {"johto": 2}], ["togepi", [74], {"johto": 2}], ["togetic", [77], {"johto": 2}], ["natu", [126], {"johto": 2}], ["xatu", [126], {"johto": 2}], ["mareep", [57], {"johto": 2}], ["flaaffy", [57], {"johto": 2}], ["ampharos", [57], {"johto": 2}], ["bellossom", [144], {"johto": 2}], ["marill", [89], {"johto": 2}], ["azumarill", [89], {"johto": 2}], ["sudowoodo", [195], {"johto": 2}], ["politoed", [209], {"johto": 2}], ["hoppip", [121], {"johto": 2}], ["skiploom", [121], {"johto": 2}], ["jumpluff", [121], {"johto": 2}], ["aipom", [174], {"johto": 2}], ["sunkern", [144], {"johto": 2}], ["sunflora", [144], {"johto": 2}], ["yanma", [7], {"johto": 2}], ["wooper", [164], {"johto": 2}], ["quagsire", [164], {"johto": 2}], ["espeon", [189], {"johto": 2}], ["umbreon", [20], {"johto": 2}], ["murkrow", [26], {"johto": 2}], ["slowking", [194], {"johto": 2}], ["misdreavus", [132], {"johto": 2}], ["unown", [189], {"johto": 2}], ["wobbuffet", [189], {"johto": 2}], ["girafarig", [176], {"johto": 2}], ["pineco", [0], {"johto": 2}], ["forretress", [17], {"johto": 2}], ["dunsparce", [174], {"johto": 2}], ["gligar", [122], {"johto": 2}], ["steelix", [162], {"johto": 2}], ["snubbull", [74], {"johto": 2}], ["granbull", [74], {"johto": 2}], ["qwilfish", [188], {"johto": 2}], ["scizor", [17], {"johto": 2}], ["shuckle", [15], {"johto": 2}], ["heracross", [5], {"johto": 2}], ["sneasel", [30], {"johto": 2}], ["teddiursa", [174], {"johto": 2}], ["ursaring", [174], {"johto": 2}], ["slugma", [105], {"johto": 2}], ["magcargo", [114], {"johto": 2}], ["swinub", [156], {"johto": 2}], ["piloswine", [156], {"johto": 2}], ["corsola", [199], {"johto": 2}], ["remoraid", [209], {"johto": 2}], ["octillery", [209], {"johto": 2}], ["delibird", [123], {"johto": 2}], ["mantine", [131], {"johto": 2}], ["skarmory", [129], {"johto": 2}], ["houndour", [25], {"johto": 2}], ["houndoom", [25], {"johto": 2}], ["kingdra", [56], {"johto": 2}], ["phanpy", [155], {"johto": 2}], ["donphan", [155], {"johto": 2}], ["porygon2", [174], {"johto": 2}], ["stantler", [174], {"johto": 2}], ["smeargle", [174], {"johto": 2}], ["tyrogue", [90], {"johto": 2}], ["hitmontop", [90], {"johto": 2}], ["smoochum", [168], {"johto": 2}], ["elekid", [57], {"johto": 2}], ["magby", [105], {"johto": 2}], ["miltank", [174], {"johto": 2}], ["blissey", [174], {"johto": 2}], ["raikou", [57], {"johto": 2}], ["entei", [105], {"johto": 2}], ["suicune", [209], {"johto": 2}], ["larvitar", [160], {"johto": 2}], ["pupitar", [160], {"johto": 2}], ["tyranitar", [34], {"johto": 2}], ["lugia", [126], {"johto": 2}], ["ho-oh", [106], {"johto": 2}], ["celebi", [149], {"johto": 2}], ["treecko", [144], {"hoenn": 6}], ["grovyle", [144], {"hoenn": 6}], ["sceptile", [144], {"hoenn": 6}], ["torchic", [105], {"hoenn": 6}], ["combusken", [91], {"hoenn": 6}], ["blaziken", [91], {"hoenn": 6}], ["mudkip", [209], {"hoenn": 6}], ["marshtomp", [164], {"hoenn": 6}], ["swampert", [164], {"hoenn": 6}], ["poochyena", [20], {"hoenn": 6}], ["mightyena", [20], {"hoenn": 6}], ["zigzagoon", [174], {"hoenn": 6}], ["linoone", [174], {"hoenn": 6}], ["wurmple", [0], {"hoenn": 6}], ["silcoon", [0], {"hoenn": 6}], ["beautifly", [7], {"hoenn": 6}], ["cascoon", [0], {"hoenn": 6}], ["dustox", [13], {"hoenn": 6}], ["lotad", [154], {"hoenn": 6}], ["lombre", [154], {"hoenn": 6}], ["ludicolo", [154], {"hoenn": 6}], ["seedot", [144], {"hoenn": 6}], ["nuzleaf", [28], {"hoenn": 6}], ["shiftry", [28], {"hoenn": 6}], ["taillow", [124], {"hoenn": 6}], ["swellow", [124], {"hoenn": 6}], ["wingull", [131], {"hoenn": 6}], ["pelipper", [131], {"hoenn": 6}], ["ralts", [84], {"hoenn": 6}], ["kirlia", [84], {"hoenn": 6}], ["gardevoir", [84], {"hoenn": 6}], ["surskit", [19], {"hoenn": 6}], ["masquerain", [7], {"hoenn": 6}], ["shroomish", [144], {"hoenn": 6}], ["breloom", [94], {"hoenn": 6}], ["slakoth", [174], {"hoenn": 6}], ["vigoroth", [174], {"hoenn": 6}], ["slaking", [174], {"hoenn": 6}], ["nincada", [10], {"hoenn": 6}], ["ninjask", [7], {"hoenn": 6}], ["shedinja", [8], {"hoenn": 6}], ["whismur", [174], {"hoenn": 6}], ["loudred", [174], {"hoenn": 6}], ["exploud", [174], {"hoenn": 6}], ["makuhita", [90], {"hoenn": 6}], ["hariyama", [90], {"hoenn": 6}], ["azurill", [82], {"hoenn": 6}], ["nosepass", [195], {"hoenn": 6}], ["skitty", [174], {"hoenn": 6}], ["delcatty", [174], {"hoenn": 6}], ["sableye", [27], {"hoenn": 6}], ["mawile", [87], {"hoenn": 6}], ["aron", [197], {"hoenn": 6}], ["lairon", [197], {"hoenn": 6}], ["aggron", [197], {"hoenn": 6}], ["meditite", [99], {"hoenn": 6}], ["medicham", [99], {"hoenn": 6}], ["electrike", [57], {"hoenn": 6}], ["manectric", [57], {"hoenn": 6}], ["plusle", [57], {"hoenn": 6}], ["minun", [57], {"hoenn": 6}], ["volbeat", [0], {"hoenn": 6}], ["illumise", [0], {"hoenn": 6}], ["roselia", [148], {"hoenn": 6}], ["gulpin", [182], {"hoenn": 6}], ["swalot", [182], {"hoenn": 6}], ["carvanha", [38], {"hoenn": 6}], ["sharpedo", [38], {"hoenn": 6}], ["wailmer", [209], {"hoenn": 6}], ["wailord", [209], {"hoenn": 6}], ["numel", [109], {"hoenn": 6}], ["camerupt", [109], {"hoenn": 6}], ["torkoal", [105], {"hoenn": 6}], ["spoink", [189], {"hoenn": 6}], ["grumpig", [189], {"hoenn": 6}], ["spinda", [174], {"hoenn": 6}], ["trapinch", [155], {"hoenn": 6}], ["vibrava", [47], {"hoenn": 6}], ["flygon", [47], {"hoenn": 6}], ["cacnea", [144], {"hoenn": 6}], ["cacturne", [28], {"hoenn": 6}], ["swablu", [124], {"hoenn": 6}], ["altaria", [44], {"hoenn": 6}], ["zangoose", [174], {"hoenn": 6}], ["seviper", [182], {"hoenn": 6}], ["lunatone", [190], {"hoenn": 6}], ["solrock", [190], {"hoenn": 6}], ["barboach", [164], {"hoenn": 6}], ["whiscash", [164], {"hoenn": 6}], ["corphish", [209], {"hoenn": 6}], ["crawdaunt", [38], {"hoenn": 6}], ["baltoy", [159], {"hoenn": 6}], ["claydol", [159], {"hoenn": 6}], ["lileep", [150], {"hoenn": 6}], ["cradily", [150], {"hoenn": 6}], ["anorith", [15], {"hoenn": 6}], ["armaldo", [15], {"hoenn": 6}], ["feebas", [209], {"hoenn": 6}], ["milotic", [209], {"hoenn": 6}], ["castform", [174], {"hoenn": 6}], ["kecleon", [174], {"hoenn": 6}], ["shuppet", [132], {"hoenn": 6}], ["banette", [132], {"hoenn": 6}], ["duskull", [132], {"hoenn": 6}], ["dusclops", [132], {"hoenn": 6}], ["tropius", [121], {"hoenn": 6}], ["chimecho", [189], {"hoenn": 6}], ["absol", [20], {"hoenn": 6}], ["wynaut", [189], {"hoenn": 6}], ["snorunt", [165], {"hoenn": 6}], ["glalie", [165], {"hoenn": 6}], ["spheal", [173], {"hoenn": 6}], ["sealeo", [173], {"hoenn": 6}], ["walrein", [173], {"hoenn": 6}], ["clamperl", [209], {"hoenn": 6}], ["huntail", [209], {"hoenn": 6}], ["gorebyss", [209], {"hoenn": 6}], ["relicanth", [199], {"hoenn": 6}], ["luvdisc", [209], {"hoenn": 6}], ["bagon", [39], {"hoenn": 6}], ["shelgon", [39], {"hoenn": 6}], ["salamence", [44], {"hoenn": 6}], ["beldum", [192], {"hoenn": 6}], ["metang", [192], {"hoenn": 6}], ["metagross", [192], {"hoenn": 6}], ["regirock", [195], {"hoenn": 6}], ["regice", [165], {"hoenn": 6}], ["registeel", [204], {"hoenn": 6}], ["latias", [51], {"hoenn": 6}], ["latios", [51], {"hoenn": 6}], ["kyogre", [209], {"hoenn": 6}], ["groudon", [155], {"hoenn": 6}], ["rayquaza", [44], {"hoenn": 6}], ["jirachi", [192], {"hoenn": 6}], ["deoxys-normal", [189], {"hoenn": 6}], ["turtwig", [144], {"sinnoh": 4}], ["grotle", [144], {"sinnoh": 4}], ["torterra", [145], {"sinnoh": 4}], ["chimchar", [105], {"sinnoh": 4}], ["monferno", [91], {"sinnoh": 4}], ["infernape", [91], {"sinnoh": 4}], ["piplup", [209], {"sinnoh": 4}], ["prinplup", [209], {"sinnoh": 4}], ["empoleon", [206], {"sinnoh": 4}], ["starly", [124], {"sinnoh": 4}], ["staravia", [124], {"sinnoh": 4}], ["staraptor", [124], {"sinnoh": 4}], ["bidoof", [174], {"sinnoh": 4}], ["bibarel", [181], {"sinnoh": 4}], ["kricketot", [0], {"sinnoh": 4}], ["kricketune", [0], {"sinnoh": 4}], ["shinx", [57], {"sinnoh": 4}], ["luxio", [57], {"sinnoh": 4}], ["luxray", [57], {"sinnoh": 4}], ["budew", [148], {"sinnoh": 4}], ["roserade", [148], {"sinnoh": 4}], ["cranidos", [195], {"sinnoh": 4}], ["rampardos", [195], {"sinnoh": 4}], ["shieldon", [197], {"sinnoh": 4}], ["bastiodon", [197], {"sinnoh": 4}], ["burmy", [0], {"sinnoh": 4}], ["wormadam-plant", [9], {"sinnoh": 4}], ["mothim", [7], {"sinnoh": 4}], ["combee", [7], {"sinnoh": 4}], ["vespiquen", [7], {"sinnoh": 4}], ["pachirisu", [57], {"sinnoh": 4}], ["buizel", [209], {"sinnoh": 4}], ["floatzel", [209], {"sinnoh": 4}], ["cherubi", [144], {"sinnoh": 4}], ["cherrim", [144], {"sinnoh": 4}], ["shellos", [209], {"sinnoh": 4}], ["gastrodon", [164], {"sinnoh": 4}], ["ambipom", [174], {"sinnoh": 4}], ["drifloon", [120], {"sinnoh": 4}], ["drifblim", [120], {"sinnoh": 4}], ["buneary", [174], {"sinnoh": 4}], ["lopunny", [174], {"sinnoh": 4}], ["mismagius", [132], {"sinnoh": 4}], ["honchkrow", [26], {"sinnoh": 4}], ["glameow", [174], {"sinnoh": 4}], ["purugly", [174], {"sinnoh": 4}], ["chingling", [189], {"sinnoh": 4}], ["stunky", [32], {"sinnoh": 4}], ["skuntank", [32], {"sinnoh": 4}], ["bronzor", [192], {"sinnoh": 4}], ["bronzong", [192], {"sinnoh": 4}], ["bonsly", [195], {"sinnoh": 4}], ["mime-jr", [84], {"sinnoh": 4}], ["happiny", [174], {"sinnoh": 4}], ["chatot", [124], {"sinnoh": 4}], ["spiritomb", [27], {"sinnoh": 4}], ["gible", [47], {"sinnoh": 4}], ["gabite", [47], {"sinnoh": 4}], ["garchomp", [47], {"sinnoh": 4}], ["munchlax", [174], {"sinnoh": 4}], ["riolu", [90], {"sinnoh": 4}], ["lucario", [102], {"sinnoh": 4}], ["hippopotas", [155], {"sinnoh": 4}], ["hippowdon", [155], {"sinnoh": 4}], ["skorupi", [13], {"sinnoh": 4}], ["drapion", [32], {"sinnoh": 4}], ["croagunk", [98], {"sinnoh": 4}], ["toxicroak", [98], {"sinnoh": 4}], ["carnivine", [144], {"sinnoh": 4}], ["finneon", [209], {"sinnoh": 4}], ["lumineon", [209], {"sinnoh": 4}], ["mantyke", [131], {"sinnoh": 4}], ["snover", [146], {"sinnoh": 4}], ["abomasnow", [146], {"sinnoh": 4}], ["weavile", [30], {"sinnoh": 4}], ["magnezone", [71], {"sinnoh": 4}], ["lickilicky", [174], {"sinnoh": 4}], ["rhyperior", [160], {"sinnoh": 4}], ["tangrowth", [144], {"sinnoh": 4}], ["electivire", [57], {"sinnoh": 4}], ["magmortar", [105], {"sinnoh": 4}], ["togekiss", [77], {"sinnoh": 4}], ["yanmega", [7], {"sinnoh": 4}], ["leafeon", [144], {"sinnoh": 4}], ["glaceon", [165], {"sinnoh": 4}], ["gliscor", [122], {"sinnoh": 4}], ["mamoswine", [156], {"sinnoh": 4}], ["porygon-z", [174], {"sinnoh": 4}], ["gallade", [99], {"sinnoh": 4}], ["probopass", [197], {"sinnoh": 4}], ["dusknoir", [132], {"sinnoh": 4}], ["froslass", [135], {"sinnoh": 4}], ["rotom", [62], {"sinnoh": 4}], ["uxie", [189], {"sinnoh": 4}], ["mesprit", [189], {"sinnoh": 4}], ["azelf", [189], {"sinnoh": 4}], ["dialga", [54], {"sinnoh": 4}], ["palkia", [56], {"sinnoh": 4}], ["heatran", [116], None], ["regigigas", [174], None], ["giratina-altered", [45], {"sinnoh": 4}], ["cresselia", [189], None], ["phione", [209], None], ["manaphy", [209], {"sinnoh": 4}], ["darkrai", [20], None], ["shaymin-land", [144], None], ["arceus", [174], None], ["victini", [113], {"unova": 5}], ["snivy", [144], {"unova": 5}], ["servine", [144], {"unova": 5}], ["serperior", [144], {"unova": 5}], ["tepig", [105], {"unova": 5}], ["pignite", [91], {"unova": 5}], ["emboar", [91], {"unova": 5}], ["oshawott", [209], {"unova": 5}], ["dewott", [209], {"unova": 5}], ["samurott", [209], {"unova": 5}], ["patrat", [174], {"unova": 5}], ["watchog", [174], {"unova": 5}], ["lillipup", [174], {"unova": 5}], ["herdier", [174], {"unova": 5}], ["stoutland", [174], {"unova": 5}], ["purrloin", [20], {"unova": 5}], ["liepard", [20], {"unova": 5}], ["pansage", [144], {"unova": 5}], ["simisage", [144], {"unova": 5}], ["pansear", [105], {"unova": 5}], ["simisear", [105], {"unova": 5}], ["panpour", [209], {"unova": 5}], ["simipour", [209], {"unova": 5}], ["munna", [189], {"unova": 5}], ["musharna", [189], {"unova": 5}], ["pidove", [124], {"unova": 5}], ["tranquill", [124], {"unova": 5}], ["unfezant", [124], {"unova": 5}], ["blitzle", [57], {"unova": 5}], ["zebstrika", [57], {"unova": 5}], ["roggenrola", [195], {"unova": 5}], ["boldore", [195], {"unova": 5}], ["gigalith", [195], {"unova": 5}], ["woobat", [126], {"unova": 5}], ["swoobat", [126], {"unova": 5}], ["drilbur", [155], {"unova": 5}], ["excadrill", [162], {"unova": 5}], ["audino", [174], {"unova": 5}], ["timburr", [90], {"unova": 5}], ["gurdurr", [90], {"unova": 5}], ["conkeldurr", [90], {"unova": 5}], ["tympole", [209], {"unova": 5}], ["palpitoad", [164], {"unova": 5}], ["seismitoad", [164], {"unova": 5}], ["throh", [90], {"unova": 5}], ["sawk", [90], {"unova": 5}], ["sewaddle", [9], {"unova": 5}], ["swadloon", [9], {"unova": 5}], ["leavanny", [9], {"unova": 5}], ["venipede", [13], {"unova": 5}], ["whirlipede", [13], {"unova": 5}], ["scolipede", [13], {"unova": 5}], ["cottonee", [79], {"unova": 5}], ["whimsicott", [79], {"unova": 5}], ["petilil", [144], {"unova": 5}], ["lilligant", [144], {"unova": 5}], ["basculin-red-striped", [209], {"unova": 5}], ["sandile", [29], {"unova": 5}], ["krokorok", [29], {"unova": 5}], ["krookodile", [29], {"unova": 5}], ["darumaka", [105], {"unova": 5}], ["darmanitan-standard", [105], {"unova": 5}], ["maractus", [144], {"unova": 5}], ["dwebble", [15], {"unova": 5}], ["crustle", [15], {"unova": 5}], ["scraggy", [24], {"unova": 5}], ["scrafty", [24], {"unova": 5}], ["sigilyph", [126], {"unova": 5}], ["yamask", [132], {"unova": 5}], ["cofagrigus", [132], {"unova": 5}], ["tirtouga", [199], {"unova": 5}], ["carracosta", [199], {"unova": 5}], ["archen", [127], {"unova": 5}], ["archeops", [127], {"unova": 5}], ["trubbish", [182], {"unova": 5}], ["garbodor", [182], {"unova": 5}], ["zorua", [20], {"unova": 5}], ["zoroark", [20], {"unova": 5}], ["minccino", [174], {"unova": 5}], ["cinccino", [174], {"unova": 5}], ["gothita", [189], {"unova": 5}], ["gothorita", [189], {"unova": 5}], ["gothitelle", [189], {"unova": 5}], ["solosis", [189], {"unova": 5}], ["duosion", [189], {"unova": 5}], ["reuniclus", [189], {"unova": 5}], ["ducklett", [131], {"unova": 5}], ["swanna", [131], {"unova": 5}], ["vanillite", [165], {"unova": 5}], ["vanillish", [165], {"unova": 5}], ["vanilluxe", [165], {"unova": 5}], ["deerling", [147], {"unova": 5}], ["sawsbuck", [147], {"unova": 5}], ["emolga", [61], {"unova": 5}], ["karrablast", [0], {"unova": 5}], ["escavalier", [17], {"unova": 5}], ["foongus", [148], {"unova": 5}], ["amoonguss", [148], {"unova": 5}], ["frillish", [143], {"unova": 5}], ["jellicent", [143], {"unova": 5}], ["alomomola", [209], {"unova": 5}], ["joltik", [3], {"unova": 5}], ["galvantula", [3], {"unova": 5}], ["ferroseed", [152], {"unova": 5}], ["ferrothorn", [152], {"unova": 5}], ["klink", [204], {"unova": 5}], ["klang", [204], {"unova": 5}], ["klinklang", [204], {"unova": 5}], ["tynamo", [57], {"unova": 5}], ["eelektrik", [57], {"unova": 5}], ["eelektross", [57], {"unova": 5}], ["elgyem", [189], {"unova": 5}], ["beheeyem", [189], {"unova": 5}], ["litwick", [107], {"unova": 5}], ["lampent", [107], {"unova": 5}], ["chandelure", [107], {"unova": 5}], ["axew", [39], {"unova": 5}], ["fraxure", [39], {"unova": 5}], ["haxorus", [39], {"unova": 5}], ["cubchoo", [165], {"unova": 5}], ["beartic", [165], {"unova": 5}], ["cryogonal", [165], {"unova": 5}], ["shelmet", [0], {"unova": 5}], ["accelgor", [0], {"unova": 5}], ["stunfisk", [64], {"unova": 5}], ["mienfoo", [90], {"unova": 5}], ["mienshao", [90], {"unova": 5}], ["druddigon", [39], {"unova": 5}], ["golett", [134], {"unova": 5}], ["golurk", [134], {"unova": 5}], ["pawniard", [36], {"unova": 5}], ["bisharp", [36], {"unova": 5}], ["bouffalant", [174], {"unova": 5}], ["rufflet", [124], {"unova": 5}], ["braviary", [124], {"unova": 5}], ["vullaby", [26], {"unova": 5}], ["mandibuzz", [26], {"unova": 5}], ["heatmor", [105], {"unova": 5}], ["durant", [17], {"unova": 5}], ["deino", [21], {"unova": 5}], ["zweilous", [21], {"unova": 5}], ["hydreigon", [21], {"unova": 5}], ["larvesta", [6], {"unova": 5}], ["volcarona", [6], {"unova": 5}], ["cobalion", [102], {"unova": 5}], ["terrakion", [100], {"unova": 5}], ["virizion", [94], {"unova": 5}], ["tornadus-incarnate", [119], {"unova": 5}], ["thundurus-incarnate", [61], {"unova": 5}], ["reshiram", [43], {"unova": 5}], ["zekrom", [40], {"unova": 5}], ["landorus-incarnate", [122], {"unova": 5}], ["kyurem", [48], {"unova": 5}], ["keldeo-ordinary", [104], {"unova": 5}], ["meloetta-aria", [176], {"unova": 5}], ["genesect", [17], {"unova": 5}], ["chespin", [144], {"kalos": 6}], ["quilladin", [144], {"kalos": 6}], ["chesnaught", [94], {"kalos": 6}], ["fennekin", [105], {"kalos": 6}], ["braixen", [105], {"kalos": 6}], ["delphox", [113], {"kalos": 6}], ["froakie", [209], {"kalos": 6}], ["frogadier", [209], {"kalos": 6}], ["greninja", [38], {"kalos": 6}], ["bunnelby", [174], {"kalos": 6}], ["diggersby", [157], {"kalos": 6}], ["fletchling", [124], {"kalos": 6}], ["fletchinder", [106], {"kalos": 6}], ["talonflame", [106], {"kalos": 6}], ["scatterbug", [0], {"kalos": 6}], ["spewpa", [0], {"kalos": 6}], ["vivillon", [7], {"kalos": 6}], ["litleo", [111], {"kalos": 6}], ["pyroar", [111], {"kalos": 6}], ["flabebe", [74], {"kalos": 6}], ["floette", [74], {"kalos": 6}], ["florges", [74], {"kalos": 6}], ["skiddo", [144], {"kalos": 6}], ["gogoat", [144], {"kalos": 6}], ["pancham", [90], {"kalos": 6}], ["pangoro", [24], {"kalos": 6}], ["furfrou", [174], {"kalos": 6}], ["espurr", [189], {"kalos": 6}], ["meowstic-male", [189], {"kalos": 6}], ["honedge", [141], {"kalos": 6}], ["doublade", [141], {"kalos": 6}], ["aegislash-shield", [141], {"kalos": 6}], ["spritzee", [74], {"kalos": 6}], ["aromatisse", [74], {"kalos": 6}], ["swirlix", [74], {"kalos": 6}], ["slurpuff", [74], {"kalos": 6}], ["inkay", [33], {"kalos": 6}], ["malamar", [33], {"kalos": 6}], ["binacle", [199], {"kalos": 6}], ["barbaracle", [199], {"kalos": 6}], ["skrelp", [188], {"kalos": 6}], ["dragalge", [50], {"kalos": 6}], ["clauncher", [209], {"kalos": 6}], ["clawitzer", [209], {"kalos": 6}], ["helioptile", [66], {"kalos": 6}], ["heliolisk", [66], {"kalos": 6}], ["tyrunt", [52], {"kalos": 6}], ["tyrantrum", [52], {"kalos": 6}], ["amaura", [169], {"kalos": 6}], ["aurorus", [169], {"kalos": 6}], ["sylveon", [74], {"kalos": 6}], ["hawlucha", [92], {"kalos": 6}], ["dedenne", [58], {"kalos": 6}], ["carbink", [85], {"kalos": 6}], ["goomy", [39], {"kalos": 6}], ["sliggoo", [39], {"kalos": 6}], ["goodra", [39], {"kalos": 6}], ["klefki", [87], {"kalos": 6}], ["phantump", [133], {"kalos": 6}], ["trevenant", [133], {"kalos": 6}], ["pumpkaboo-average", [133], {"kalos": 6}], ["gourgeist-average", [133], {"kalos": 6}], ["bergmite", [165], {"kalos": 6}], ["avalugg", [165], {"kalos": 6}], ["noibat", [44], {"kalos": 6}], ["noivern", [44], {"kalos": 6}], ["xerneas", [74], {"kalos": 6}], ["yveltal", [26], {"kalos": 6}], ["zygarde-50", [47], {"kalos": 6}], ["diancie", [85], None], ["hoopa", [138], None], ["volcanion", [118], None], ["rowlet", [121], {"alola": 7}], ["dartrix", [121], {"alola": 7}], ["decidueye", [133], {"alola": 7}], ["litten", [105], {"alola": 7}], ["torracat", [105], {"alola": 7}], ["incineroar", [25], {"alola": 7}], ["popplio", [209], {"alola": 7}], ["brionne", [209], {"alola": 7}], ["primarina", [89], {"alola": 7}], ["pikipek", [124], {"alola": 7}], ["trumbeak", [124], {"alola": 7}], ["toucannon", [124], {"alola": 7}], ["yungoos", [174], {"alola": 7}], ["gumshoos", [174], {"alola": 7}], ["grubbin", [0], {"alola": 7}], ["charjabug", [3], {"alola": 7}], ["vikavolt", [3], {"alola": 7}], ["crabrawler", [90], {"alola": 7}], ["crabominable", [96], {"alola": 7}], ["oricorio-baile", [106], {"alola": 7}], ["cutiefly", [4], {"alola": 7}], ["ribombee", [4], {"alola": 7}], ["rockruff", [195], {"alola": 7}], ["lycanroc-midday", [195], {"alola": 7}], ["wishiwashi-solo", [209], {"alola": 7}], ["mareanie", [188], {"alola": 7}], ["toxapex", [188], {"alola": 7}], ["mudbray", [155], {"alola": 7}], ["mudsdale", [155], {"alola": 7}], ["dewpider", [19], {"alola": 7}], ["araquanid", [19], {"alola": 7}], ["fomantis", [144], {"alola": 7}], ["lurantis", [144], {"alola": 7}], ["morelull", [79], {"alola": 7}], ["shiinotic", [79], {"alola": 7}], ["salandit", [112], {"alola": 7}], ["salazzle", [112], {"alola": 7}], ["stufful", [97], {"alola": 7}], ["bewear", [97], {"alola": 7}], ["bounsweet", [144], {"alola": 7}], ["steenee", [144], {"alola": 7}], ["tsareena", [144], {"alola": 7}], ["comfey", [74], {"alola": 7}], ["oranguru", [176], {"alola": 7}], ["passimian", [90], {"alola": 7}], ["wimpod", [19], {"alola": 7}], ["golisopod", [19], {"alola": 7}], ["sandygast", [134], {"alola": 7}], ["palossand", [134], {"alola": 7}], ["pyukumuku", [209], {"alola": 7}], ["type-null", [174], {"alola": 7}], ["silvally", [174], {"alola": 7}], ["minior-red-meteor", [127], {"alola": 7}], ["komala", [174], {"alola": 7}], ["turtonator", [43], {"alola": 7}], ["togedemaru", [71], {"alola": 7}], ["mimikyu-disguised", [78], {"alola": 7}], ["bruxish", [194], {"alola": 7}], ["drampa", [49], {"alola": 7}], ["dhelmise", [133], {"alola": 7}], ["jangmo-o", [39], {"alola": 7}], ["hakamo-o", [42], {"alola": 7}], ["kommo-o", [42], {"alola": 7}], ["tapu-koko", [58], {"alola": 7}], ["tapu-lele", [84], {"alola": 7}], ["tapu-bulu", [79], {"alola": 7}], ["tapu-fini", [89], {"alola": 7}], ["cosmog", [189], {"alola": 7}], ["cosmoem", [189], {"alola": 7}], ["solgaleo", [192], {"alola": 7}], ["lunala", [138], {"alola": 7}], ["nihilego", [184], {"alola": 7}], ["buzzwole", [5], {"alola": 7}], ["pheromosa", [5], {"alola": 7}], ["xurkitree", [57], {"alola": 7}], ["celesteela", [129], {"alola": 7}], ["kartana", [152], {"alola": 7}], ["guzzlord", [21], {"alola": 7}], ["necrozma", [189], {"alola": 7}], ["magearna", [87], {"alola": 7}], ["marshadow", [93], {"alola": 7}], ["poipole", [182], {"alola": 7}], ["naganadel", [50], {"alola": 7}], ["stakataka", [197], {"alola": 7}], ["blacephalon", [107], {"alola": 7}], ["zeraora", [57], {"alola": 7}], ["meltan", [204], {"kanto": 1}], ["melmetal", [204], {"kanto": 1}], ["grookey", [144], {"galar": 8}], ["thwackey", [144], {"galar": 8}], ["rillaboom", [144], {"galar": 8}], ["scorbunny", [105], {"galar": 8}], ["raboot", [105], {"galar": 8}], ["cinderace", [105], {"galar": 8}], ["sobble", [209], {"galar": 8}], ["drizzile", [209], {"galar": 8}], ["inteleon", [209], {"galar": 8}], ["skwovet", [174], {"galar": 8}], ["greedent", [174], {"galar": 8}], ["rookidee", [119], {"galar": 8}], ["corvisquire", [119], {"galar": 8}], ["corviknight", [129], {"galar": 8}], ["blipbug", [0], {"galar": 8}], ["dottler", [14], {"galar": 8}], ["orbeetle", [14], {"galar": 8}], ["nickit", [20], {"galar": 8}], ["thievul", [20], {"galar": 8}], ["gossifleur", [144], {"galar": 8}], ["eldegoss", [144], {"galar": 8}], ["wooloo", [174], {"galar": 8}], ["dubwool", [174], {"galar": 8}], ["chewtle", [209], {"galar": 8}], ["drednaw", [199], {"galar": 8}], ["yamper", [57], {"galar": 8}], ["boltund", [57], {"galar": 8}], ["rolycoly", [195], {"galar": 8}], ["carkol", [114], {"galar": 8}], ["coalossal", [114], {"galar": 8}], ["applin", [46], {"galar": 8}], ["flapple", [46], {"galar": 8}], ["appletun", [46], {"galar": 8}], ["silicobra", [155], {"galar": 8}], ["sandaconda", [155], {"galar": 8}], ["cramorant", [131], {"galar": 8}], ["arrokuda", [209], {"galar": 8}], ["barraskewda", [209], {"galar": 8}], ["toxel", [67], {"galar": 8}], ["toxtricity-amped", [67], {"galar": 8}], ["sizzlipede", [6], {"galar": 8}], ["centiskorch", [6], {"galar": 8}], ["clobbopus", [90], {"galar": 8}], ["grapploct", [90], {"galar": 8}], ["sinistea", [132], {"galar": 8}], ["polteageist", [132], {"galar": 8}], ["hatenna", [189], {"galar": 8}], ["hattrem", [189], {"galar": 8}], ["hatterene", [84], {"galar": 8}], ["impidimp", [23], {"galar": 8}], ["morgrem", [23], {"galar": 8}], ["grimmsnarl", [23], {"galar": 8}], ["obstagoon", [31], {"galar": 8}], ["perrserker", [204], {"galar": 8}], ["cursola", [132], {"galar": 8}], ["sirfetchd", [90], {"galar": 8}], ["mr-rime", [168], {"galar": 8}], ["runerigus", [134], {"galar": 8}], ["milcery", [74], {"galar": 8}], ["alcremie", [74], {"galar": 8}], ["falinks", [90], {"galar": 8}], ["pincurchin", [57], {"galar": 8}], ["snom", [11], {"galar": 8}], ["frosmoth", [11], {"galar": 8}], ["stonjourner", [195], {"galar": 8}], ["eiscue-ice", [165], {"galar": 8}], ["indeedee-male", [176], {"galar": 8}], ["morpeko-full-belly", [22], {"galar": 8}], ["cufant", [204], {"galar": 8}], ["copperajah", [204], {"galar": 8}], ["dracozolt", [40], {"galar": 8}], ["arctozolt", [65], {"galar": 8}], ["dracovish", [56], {"galar": 8}], ["arctovish", [173], {"galar": 8}], ["duraludon", [54], {"galar": 8}], ["dreepy", [45], {"galar": 8}], ["drakloak", [45], {"galar": 8}], ["dragapult", [45], {"galar": 8}], ["zacian", [74], {"galar": 8}], ["zamazenta", [90], {"galar": 8}], ["eternatus", [50], {"galar": 8}], ["kubfu", [90], {"galar": 8}], ["urshifu-single-strike", [24], {"galar": 8}], ["zarude", [28], {"galar": 8}], ["regieleki", [57], {"galar": 8}], ["regidrago", [39], {"galar": 8}], ["glastrier", [165], {"galar": 8}], ["spectrier", [132], {"galar": 8}], ["calyrex", [149], {"galar": 8}], ["wyrdeer", [176], {"hisui": 8}], ["kleavor", [15], {"hisui": 8}], ["ursaluna", [157], {"hisui": 8}], ["basculegion-male", [143], {"hisui": 8}], ["sneasler", [98], {"hisui": 8}], ["overqwil", [32], {"hisui": 8}], ["enamorus-incarnate", [77], {"hisui": 8}], ["sprigatito", [144], {"paldea": 9}], ["floragato", [144], {"paldea": 9}], ["meowscarada", [28], {"paldea": 9}], ["fuecoco", [105], {"paldea": 9}], ["crocalor", [105], {"paldea": 9}], ["skeledirge", [107], {"paldea": 9}], ["quaxly", [209], {"paldea": 9}], ["quaxwell", [209], {"paldea": 9}], ["quaquaval", [104], {"paldea": 9}], ["lechonk", [174], {"paldea": 9}], ["oinkologne", [174], {"paldea": 9}], ["tarountula", [0], {"paldea": 9}], ["spidops", [0], {"paldea": 9}], ["nymble", [0], {"paldea": 9}], ["lokix", [1], {"paldea": 9}], ["pawmi", [57], {"paldea": 9}], ["pawmo", [59], {"paldea": 9}], ["pawmot", [59], {"paldea": 9}], ["tandemaus", [174], {"paldea": 9}], ["maushold", [174], {"paldea": 9}], ["fidough", [74], {"paldea": 9}], ["dachsbun", [74], {"paldea": 9}], ["smoliv", [147], {"paldea": 9}], ["dolliv", [147], {"paldea": 9}], ["arboliva", [147], {"paldea": 9}], ["squawkabilly", [124], {"paldea": 9}], ["nacli", [195], {"paldea": 9}], ["naclstack", [195], {"paldea": 9}], ["garganacl", [195], {"paldea": 9}], ["charcadet", [105], {"paldea": 9}], ["armarouge", [113], {"paldea": 9}], ["ceruledge", [107], {"paldea": 9}], ["tadbulb", [57], {"paldea": 9}], ["bellibolt", [57], {"paldea": 9}], ["wattrel", [61], {"paldea": 9}], ["kilowattrel", [61], {"paldea": 9}], ["maschiff", [20], {"paldea": 9}], ["mabosstiff", [20], {"paldea": 9}], ["shroodle", [175], {"paldea": 9}], ["grafaiai", [175], {"paldea": 9}], ["bramblin", [133], {"paldea": 9}], ["brambleghast", [133], {"paldea": 9}], ["toedscool", [145], {"paldea": 9}], ["toedscruel", [145], {"paldea": 9}], ["klawf", [195], {"paldea": 9}], ["capsakid", [144], {"paldea": 9}], ["scovillain", [108], {"paldea": 9}], ["rellor", [0], {"paldea": 9}], ["rabsca", [14], {"paldea": 9}], ["flittle", [189], {"paldea": 9}], ["espathra", [189], {"paldea": 9}], ["tinkatink", [87], {"paldea": 9}], ["tinkatuff", [87], {"paldea": 9}], ["tinkaton", [87], {"paldea": 9}], ["wiglett", [209], {"paldea": 9}], ["wugtrio", [209], {"paldea": 9}], ["bombirdier", [26], {"paldea": 9}], ["finizen", [209], {"paldea": 9}], ["palafin", [209], {"paldea": 9}], ["varoom", [186], {"paldea": 9}], ["revavroom", [186], {"paldea": 9}], ["cyclizar", [49], {"paldea": 9}], ["orthworm", [204], {"paldea": 9}], ["glimmet", [184], {"paldea": 9}], ["glimmora", [184], {"paldea": 9}], ["greavard", [132], {"paldea": 9}], ["houndstone", [132], {"paldea": 9}], ["flamigo", [92], {"paldea": 9}], ["cetoddle", [165], {"paldea": 9}], ["cetitan", [165], {"paldea": 9}], ["veluza", [194], {"paldea": 9}], ["dondozo", [209], {"paldea": 9}], ["tatsugiri", [56], {"paldea": 9}], ["annihilape", [93], {"paldea": 9}], ["clodsire", [158], {"paldea": 9}], ["farigiraf", [176], {"paldea": 9}], ["dudunsparce", [174], {"paldea": 9}], ["kingambit", [36], {"paldea": 9}], ["great-tusk", [95], {"paldea": 9}], ["scream-tail", [84], {"paldea": 9}], ["brute-bonnet", [28], {"paldea": 9}], ["flutter-mane", [78], {"paldea": 9}], ["slither-wing", [5], {"paldea": 9}], ["sandy-shocks", [64], {"paldea": 9}], ["iron-treads", [162], {"paldea": 9}], ["iron-bundle", [173], {"paldea": 9}], ["iron-hands", [59], {"paldea": 9}], ["iron-jugulis", [26], {"paldea": 9}], ["iron-moth", [112], {"paldea": 9}], ["iron-thorns", [69], {"paldea": 9}], ["frigibax", [48], {"paldea": 9}], ["arctibax", [48], {"paldea": 9}], ["baxcalibur", [48], {"paldea": 9}], ["gimmighoul", [132], {"paldea": 9}], ["gholdengo", [141], {"paldea": 9}], ["wo-chien", [28], {"paldea": 9}], ["chien-pao", [30], {"paldea": 9}], ["ting-lu", [29], {"paldea": 9}], ["chi-yu", [25], {"paldea": 9}], ["roaring-moon", [21], {"paldea": 9}], ["iron-valiant", [75], {"paldea": 9}], ["koraidon", [42], {"paldea": 9}], ["miraidon", [40], {"paldea": 9}], ["walking-wake", [56], {"paldea": 9}], ["iron-leaves", [149], {"paldea": 9}], ["dipplin", [46], {"paldea": 9}], ["poltchageist", [133], {"paldea": 9}], ["sinistcha", [133], {"paldea": 9}], ["okidogi", [98], {"paldea": 9}], ["munkidori", [183], {"paldea": 9}], ["fezandipiti", [83], {"paldea": 9}], ["ogerpon", [144], {"paldea": 9}], ["archaludon", [54], {"paldea": 9}], ["hydrapple", [46], {"paldea": 9}], ["gouging-fire", [43], {"paldea": 9}], ["raging-bolt", [40], {"paldea": 9}], ["iron-boulder", [190], {"paldea": 9}], ["iron-crown", [192], {"paldea": 9}], ["terapagos", [174], {"paldea": 9}], ["pecharunt", [137], {"paldea": 9}]]

def to_server(pem_path, port, module, scope):
    ssl_keyfile = pem_path / 'privkey.pem'
    ssl_certfile = pem_path / 'cert.pem'
    ssl_context = ssl.SSLContext(ssl.PROTOCOL_TLS_SERVER)
    ssl_context.load_cert_chain(
        ssl_certfile, keyfile=ssl_keyfile
    )
    config = uvicorn.Config(**{
        "port": port,
        "reload": True,
        "host": "0.0.0.0",
        "ssl_keyfile": ssl_keyfile,
        "ssl_certfile": ssl_certfile,
        "app": f"{module}:{scope}_{module}"
    })
    return uvicorn.Server(config)


async def run_server(server):
    await server.serve()


async def run_tasks():

    loop = asyncio.get_event_loop()
    api_server = to_server(PEM_PATH, API_PORT, 'api', 'pd')
    client_server = to_server(PEM_PATH, CLIENT_PORT, 'client', 'pd')
    api_task = asyncio.ensure_future(run_server(api_server))
    client_task = asyncio.ensure_future(run_server(client_server))

    # Consider following updates here:
    # https://github.com/encode/uvicorn/pull/1600
    tasks = [api_task, client_task]
    for job in asyncio.as_completed(tasks):
        try: 
            results = await job
        finally:
            break
            

if __name__ == "__main__":

    api_url = 'https://pokeapi.co/api/v2/'

    print('Updating Games...', flush=True, file=sys.stderr)
    GAME_LIST = Service.update_games(api_url, GAME_LIST)
    type_combos = describe_type_combos(api_url)

    types_unchanged = all([
        tuple(old_type) == new_type
        for old_type, new_type
        in zip(TYPE_COMBOS, type_combos)
    ]) and len(TYPE_COMBOS)
    if not types_unchanged:
        print('Wow! Found new types!')
        MON_LIST = []
    args = parser.parse_args()

    print('Updating Pokémon...', flush=True, file=sys.stderr)
    # Load Pokémon
    while True:
        try:
            dexn = len(MON_LIST) + 1
            pkmn = dex.get(dex=(dexn))
            print(f'New: Pokémon #{dexn} {pkmn.name}')
            MON_LIST.append(
                describe_mon(dexn, GAME_LIST, type_combos, api_url)
            )
        except PyPokedexHTTPError:
            break

    # Full range of the generations
    generations = sorted(set(
        game[0] for game in GAME_LIST 
    ))
    old = True # Default to Kanto only
    set_config(**{
        **vars(args), 'ports': PORTS, 'api_url': api_url,
        'default_max_gen': generations[0 if old else -1],
        'game_list': GAME_LIST, 'mon_list': MON_LIST,
        'generations': generations,
        'type_combos': type_combos,
    })

    # Test the API
    asyncio.run(run_tasks())
